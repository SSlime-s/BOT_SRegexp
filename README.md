# BOT_SRegexp

traQ 上で正規表現からそれを満たすランダムな文字列を生成する BOT です

(@BOT_cellophane リスペクト)

## サポートされている表現
- エスケープ文字
  - `\d` は `[0-9]` と同等です  
    後述する文字クラスの中で使われた場合、単に `0-9` の意味となります
  - `\w` は `[a-zA-Z_]` と同等です  
    後述する文字クラスの中で使われた場合、単に `a-zA-Z_` の意味となります
  - 任意の記号 (正確には `[^a-zA-Z0-9]`) の前でエスケープされていない `\` を使った場合、その直後の文字をただの文字として扱う (エスケープする) ことを指します  
    これは、正規表現中のどんな場所においても有効です  
    例えば `\[ [\[]` は `[ [` を生成します
- 文字クラス
  - `[a-zあ-おABC]` のように、`[]` で囲まれた文字の中からランダムに一つを返します  
    `-` を使った範囲表現もサポートしており、`a-z` なら `abcd...z` と同じ意味になります  
    文字が重複していた場合、その分だけその文字の確率は上がります
- グループ
  - `(hogehoge)` のように `()` で囲まれた部分を 1つの塊として扱います。  
    例えば後述する繰り返しと合わせて複雑な表現に使えます
  - `<hogehoge>` のように `<>` で囲むことで、もし、その部分が直接複数回繰り返された場合、同じ文字の繰り返しとして扱われます  
    例えば `<[a-z]>{2}` とした場合、`aa` や `cc` は生成されうりますが、`ac` などは生成されません。
- 繰り返し
  - `*` を文字の後ろにつけることで、直前の文字を 0 回以上繰り返した文字列を返します  
    厳密には、50% の確率で生成をやめ、50% の確率で繰り返しを続ける ことを生成をやめるまで繰り返します  
    例えば `表*裏` は裏がでるまでコインを投げ続けることと完全に等しいです
  - `+` を文字の後ろにつけることで、直前の文字を 1 回以上繰り返した文字列を返します  
    厳密には、`X+` は `XX*` と等しいです
  - `?` を文字の後ろにつけることで、直前の文字を 50% の確率で生成しません  
    例えば `aa?` は 50% の確率で `a` を生成し、50% の確率で `aa` を生成します
  - `{数字}` を文字の後ろにつけることで、直前の文字を `{}` の中の数字だけ繰り返した文字列を返します  
    例えば `a{5}` は `aaaaa` を生成します
  - `{数字,}` を文字の後ろにつけることで、直前の文字を `{}` の `,` の前の数字だけ繰り返した文字列を返します  
    厳密には、`X{数字,}` は `X{数字}X*` と等しいです  
    例えば `a{3,}` は `aaa` や `aaaaa` を生成しますが、`aa` は生成しません
  - `{数字1,数字2}` を文字の後ろにつけることで、直前の文字を `数字1` 以上 `数字2` 以下 だけ繰り返した文字列を返します  
    厳密には、`数字1` <= `数字2` である必要があり、`数字1` <= X <= `数字2` を満たす整数X から同様に確からしく選ばれた X だけ 繰り返します
- 和集合
  - `hoge|fuga|piyo` のように、`|` で複数の塊をつなぐことで、繋がれた塊を等確率で生成します  
    例えば `hoge|fuga|piyo` は 1/3 で `hoge` を、1/3 で `fuga` を、1/3 で `piyo` を生成します

## 使い方
### 正規表現から文字列を生成する
```
/(regex | regexp | rand | random | randregex | randregexp) {正規表現}
```

#### 例
- `/regex [a-z]{3}[A-Z]`
- `/randregexp [a-z]{3}[A-Z]`

### 正規表現を保存する
空白を含まない文字列 (key) に対して、正規表現を割り当てることができます

```
/(save | memory) {key} {正規表現}
```

#### 例
- `/save traP [a-z]{3}[A-Z]`
- `/memory traP [a-z]{3}[A-Z]`

### 保存した正規表現を呼び出す
保存した正規表現に対して、key から保存された正規表現で文字列を生成できます

```
/(call | load) {key}
```

#### 例
- `/call traP`
- `/memory traP`

### 保存した正規表現を削除する
保存した正規表現を消せます  
消せるのは自分が登録したものだけです

```
/(remove | delete | forget) {key}
```

#### 例
- `/remove traP`
- `/delete traP`

### チャンネルに参加させる
チャンネルに参加させることで、メンションなしでこの BOT を呼び出すことができます

```
/join
```

#### 例
- `/join`

### チャンネルから退出させる
残念ながらこの BOT が必要ではなくなったときに使ってください  
抜けさせたとしてもメンションをしたり、また参加させることでいつでも BOT を使うことができます

```
/(leave | bye)
```

#### 例
- `/leave`
- `/bye`

### 使い方を見る
このページのリンクが見れます

```
/(help | usage | readme)
```

#### 例
- `/help`
- `/usage`
